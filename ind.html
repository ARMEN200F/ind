<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мой сайт</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000000; /* Чёрный фон */
            color: #FF0000; /* Алый (красный) текст */
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .content {
            padding: 20px;
            background-color: #121212; /* Тёмный фон для блоков */
            margin-bottom: 20px;
        }
        .button-container {
            text-align: center;
            margin-top: 20px;
        }
        .button-container button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #FF0000; /* Красные кнопки */
            color: white;
            border: none;
            margin: 5px;
        }
        .article {
            background-color: #1a1a1a; /* Ещё более тёмный фон для статей */
            padding: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #FF0000; /* Алый бордер для статей */
        }
        .comment {
            background-color: #333333; /* Ещё тёмнее фон для комментариев */
            padding: 10px;
            margin-bottom: 10px;
        }
        textarea, input[type="text"] {
            background-color: #1a1a1a;
            color: white;
            border: 1px solid #555;
            width: 100%;
            padding: 8px;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="content">
        <h1>Добро пожаловать на сайт!</h1>
        <div class="button-container">
            <button onclick="showArticles()">Войти как обычный пользователь</button>
            <button onclick="showAuthorLogin()">Войти как автор</button>
        </div>
    </div>

    <div id="articles" class="content" style="display:none;">
        <h2>Статьи</h2>
        <div id="articleList"></div>
        <textarea id="commentInput" placeholder="Напишите комментарий..." rows="4" style="width:100%;"></textarea>
        <button onclick="submitComment()">Отправить комментарий</button>
    </div>

    <div id="authorLogin" class="content" style="display:none;">
        <h2>Введите промокод для входа как автор</h2>
        <input type="text" id="promoCode" placeholder="Промокод">
        <button onclick="verifyPromoCode()">Войти как автор</button>
    </div>

    <div id="authorSection" class="content" style="display:none;">
        <h2>Создайте свою статью</h2>
        <textarea id="articleInput" placeholder="Напишите вашу статью..." rows="4" style="width:100%;"></textarea>
        
        <!-- Добавление поля для загрузки изображения -->
        <h3>Загрузите изображение для вашей статьи</h3>
        <input type="file" id="imageInput" accept="image/*">

        <button onclick="submitArticle()">Опубликовать статью</button>
    </div>
</div>

<script>
    const validPromoCode = "087212"; // Пример промокода для входа как автор

    let articles = []; // Список статей
    let comments = {}; // Комментарии для каждой статьи

    // Показать все статьи
    function showArticles() {
        document.getElementById("articles").style.display = "block";
        document.getElementById("authorLogin").style.display = "none";
        document.getElementById("authorSection").style.display = "none";
    }

    // Показать форму для входа как автор
    function showAuthorLogin() {
        document.getElementById("authorLogin").style.display = "block";
        document.getElementById("articles").style.display = "none";
        document.getElementById("authorSection").style.display = "none";
    }

    // Проверка промокода
    function verifyPromoCode() {
        const promoCode = document.getElementById("promoCode").value;
        if (promoCode === validPromoCode) {
            document.getElementById("authorSection").style.display = "block";
            document.getElementById("authorLogin").style.display = "none";
        } else {
            alert("Неправильный промокод");
        }
    }

    // Отправка статьи
    function submitArticle() {
        const articleText = document.getElementById("articleInput").value;
        const imageFile = document.getElementById("imageInput").files[0];

        // Проверка, если изображение загружено
        let imageURL = "";
        if (imageFile) {
            const reader = new FileReader();
            reader.onloadend = function () {
                imageURL = reader.result;
                // Сохраняем статью с изображением
                saveArticle(articleText, imageURL);
            };
            reader.readAsDataURL(imageFile);
        } else {
            saveArticle(articleText, "");
        }
    }

    // Сохранение статьи
    function saveArticle(text, image) {
        const newArticle = {
            text: text,
            image: image
        };
        articles.push(newArticle);
        displayArticles();
        document.getElementById("articleInput").value = "";
        document.getElementById("imageInput").value = "";
    }

    // Отображение всех статей
    function displayArticles() {
        const articleList = document.getElementById("articleList");
        articleList.innerHTML = "";
        articles.forEach((article, index) => {
            const articleDiv = document.createElement("div");
            articleDiv.classList.add("article");

            const articleText = document.createElement("p");
            articleText.textContent = article.text;

            articleDiv.appendChild(articleText);

            // Если есть изображение, отображаем его
            if (article.image) {
                const articleImage = document.createElement("img");
                articleImage.src = article.image;
                articleImage.width = 200;
                articleDiv.appendChild(articleImage);
            }

            // Добавление комментариев
            const commentSection = document.createElement("div");
            commentSection.classList.add("comment");

            // Если есть комментарии для статьи
            if (comments[index]) {
                comments[index].forEach((comment) => {
                    const commentText = document.createElement("p");
                    commentText.textContent = comment;
                    commentSection.appendChild(commentText);
                });
            }

            articleDiv.appendChild(commentSection);

            // Кнопка для комментирования
            const commentButton = document.createElement("button");
            commentButton.textContent = "Добавить комментарий";
            commentButton.onclick = function () {
                const commentText = document.getElementById("commentInput").value;
                if (commentText) {
                    if (!comments[index]) {
                        comments[index] = [];
                    }
                    comments[index].push(commentText);
                    displayArticles();
                }
            };

            articleDiv.appendChild(commentButton);
            articleList.appendChild(articleDiv);
        });
    }

    // Отправка комментария
    function submitComment() {
        const commentText = document.getElementById("commentInput").value;
        const articleIndex = document.getElementById("articleIndex").value; // Индекс статьи для комментария
        if (commentText && articleIndex !== undefined) {
            if (!comments[articleIndex]) {
                comments[articleIndex] = [];
            }
            comments[articleIndex].push(commentText);
            displayArticles();
        }
    }
</script>

</body>
</html>